<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <div style="margin-left: auto; margin-right: auto; width: 300px; padding-top: 50px;"><audio id="audio" src="./0.mp3"
            controls></audio>
    </div>
    v
    <script>


        setTimeout(() => {
            setInterval(date, 1000)
        }, 5000);

        let int
        let alarm = 0
        const audio = document.getElementById("audio")
        function date() {
            const date = new Date()
            const hours = date.getHours()
            const minutes = date.getMinutes()
            let time = hours + "" + minutes
            console.log(alarm)
            if (alarm === 0 && (time === "855" || time === "950" || time === "1055" || time === "905")) {
                alarm = 1
                urok()
                setTimeout(() => {
                    alarm = 0 //не меняется на 1
                }, 61000);
            }
            else
                if (alarm === 0 && (time === "940" || time === "1035" || time === "1140" || time === "906")) {
                    alarm = 1
                    peremena()
                    setTimeout(() => {
                        alarm = 0
                    }, 61000);
                }

        }


        function urok() {
            audio.volume = 1
            audio.src = "./0.mp3";
            audio.play()
            clearInterval(int)
            console.log("furok")
        }

        function peremena() {
            audio.volume = 1
            audio.src = "./0.mp3";
            audio.play()
            int = setInterval(currentTime, 5000)
            console.log("fperemena")
        }

        function currentTime() {
            var x = document.getElementById("audio").ended
            if (x === true) {
                let random = Math.floor(Math.random() * (43 - 1 + 1)) + 1
                audio.volume = 0.05
                audio.src = "./music/" + random + ".mp3"
                audio.play()
            }
            console.log("fcurrenttime")
        }



    </script>
</body>

</html>