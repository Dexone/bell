<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div
        style="width: 600px; height: 300px; background-color: rgb(207, 207, 207); margin-left: auto; margin-right: auto;">
        <div style="margin-left: 150px; padding-top: 50px;"><audio id="audio" src="./0.mp3" controls></audio>
        </div>

        <table border="1" align="center">
релиз42
            <tr>
                <td>08:45</td>
                <td>09:35</td>
            </tr>
            <tr>
                <td>09:45</td>
                <td>11:20</td>
            </tr>
            <tr>
                <td>11:30</td>
                <td>13:05</td>
            </tr>
        </table>
    </div>

    <script>
        window.onload = function run() {
            dat = setInterval(date, 10000)
            zvo = setInterval(zvonki, 10000)
        }

        let onoff = false
        const audio = document.getElementById("audio")
        let time = []
        function date() {
            const date = new Date()
            const hours = date.getHours()
            const minutes = date.getMinutes()
            time.length = 0
            time.push(hours, minutes)
        }

        function zvonki() {
            if (time[0] == 20 && time[1] == 42 && onoff == false) //Пара 1  начало урока стоп перемена 
                stop()
            else
                if (time[0] == 20 && time[1] == 43 && onoff == false)//Пара 1 конец урока старт перемена 
                    start()
                else
                    if (time[0] == 20 && time[1] == 44 && onoff == true) //Пара 2 начало урока стоп перемена 
                        stop()
                    else
                        if (time[0] == 20 && time[1] == 45 && onoff == false) //Пара 2 конец урока старт перемена
                            start()
                        else

                            if (time[0] == 20 && time[1] == 46 && onoff == true) //Пара 3 начало урока стоп перемена 
                                stop()
                            else
                                if (time[0] == 20 && time[1] == 47 && onoff == false)//Пара 3 конец урока старт перемена 
                                    start()
        }

        function currentTime() { //включение рандомной песни
            var x = document.getElementById("audio").ended
            if (x === true) {
                let random = Math.floor(Math.random() * (43 - 1 + 1)) + 1
                audio.volume = 0.05
                audio.src = "./music/" + random + ".mp3"
                audio.play()
            }
        }

        function start() {  //старт перемены
            onoff = true
            audio.volume = 1
            audio.src = "./0.mp3";
            audio.play()
            setTimeout(int = setInterval(currentTime, 5000), 8000)
        }

        function stop() {  //конец перемены
            onoff = false
            audio.volume = 1
            audio.src = "./0.mp3";
            audio.play()
            clearInterval(int)
        }

    </script>
</body>

</html>